<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : opzioniJava.xml
    Created on : February 12, 2009, 11:18 AM
    Author     : marino
    Description:
        Purpose of the document follows.
-->

<root>
  <!-- Added section to kill OutOfMemory error  -->
            <jvmarg value="-Xms256m"  />
            <jvmarg value="-Xmx512m"  /> 
            <!-- section END -->
     <target name="-post-compile">
    <property name="output.js" location="${build.web.dir}/${gwt.module}/${gwt.module}.nocache.js" />
    </target>

    <target name="debug" description="Debug project in IDE." depends="init,compile,compile-jsps,-do-compile-single-jsp" if="netbeans.home">
    <property name="gwt.compile.unneeded" value="true" />
        <antcall target="dist"/>

        <nbdeploy debugmode="true" clientUrlPart="${client.urlPart}"/>
       <antcall target="connect-debugger"/>
       <antcall target="debug-connect-gwt-shell"/>
   </target>

   <target name="-pre-dist">
       <condition property="gwt.compile.unneeded">
           <and>
               <available file="${output.js}" />
               <uptodate>
                   <srcfiles dir="${src.dir}" includes="**/client/**/*.java" />
                   <mergemapper to="${output.js}" />
               </uptodate>
           </and>
       </condition>
       <antcall target="do-gwt-compile" />
   </target>

   <target name="do-gwt-compile" unless="gwt.compile.unneeded">
       <!-- You can override this property in the 'gwt.properties' file -->
   <property name="gwt.compiler.output.style" value="OBFUSCATED"/>
   <property name="gwt.compiler.logLevel" value="WARN"/>

       <java classpath="${javac.classpath}:${src.dir}" failonerror="true"
         classname="com.google.gwt.dev.GWTCompiler" fork="true" maxmemory="512m">
           <arg value="-out"/>
           <arg path="${build.web.dir}/"/>
           <arg value="-style"/>
           <arg value="${gwt.compiler.output.style}"/>
           <arg value="-logLevel"/>
           <arg value="${gwt.compiler.logLevel}"/>
           <arg value="${gwt.module}"/>
       </java>
   <property name="gwt.output.dir" value="${gwt.module}"/>
       <move todir="${build.web.dir}/${gwt.output.dir}">
           <fileset dir="${build.web.dir}/${gwt.module}"/>
       </move>
   </target>





</root>
