<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>
Task Properties On Load
</title>

<!-- Meta Tags -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Wufoo.com" />

<!-- CSS -->
<link rel="stylesheet" href="./css/structure.css" type="text/css" />
<link rel="stylesheet" href="./css/form.css" type="text/css" />
<link type="text/css" rel="stylesheet" href="./css/dhtmlgoodies_calendar.css?random=20051112" media="screen"></link>
<!-- JavaScript -->
<script type="text/javascript" src="./scripts/wufoo.js"></script>

 <script type="text/javascript" src="./js/tiny_mce/tiny_mce.js"></script>

  <script type="text/javascript">
function go() {


      var data = window.parent.TextEdit.getCurrentDesc();
      //document.forms['myform'].elements['elm1'].value = data;
      tinyMCE.activeEditor.setContent(data);

}




tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    theme_advanced_buttons1 : "bold,italic,underline,justifyleft,justifycenter,justifyright,justifyfull",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_more_colors : 0,
	setup : function(ed) {
      ed.onInit.add(go);
    }
});


<!-- /TinyMCE -->
</script>
<script type="text/javascript" src="./js/dhtmlgoodies_calendar.js?random=20060118"></script>
<script type="text/javascript">
/*
 * Retrieve all contacts
 */



function initForm(oForm, element_name) {

frmElement = oForm.elements[element_name];
frmElement.value = window.parent.TextEdit.getCurrentContent();

}

function initStatus(oForm, element_name) {

frmElement = oForm.elements[element_name];
frmElement.value = window.parent.TextEdit.getCurrentStatus();

}

function initDate(oForm, element_name) {

frmElement = oForm.elements[element_name];
frmElement.value = window.parent.TextEdit.getCurrentDate();

}


function initCat(oForm, element_name) {

frmElement = oForm.elements[element_name];
frmElement.value = window.parent.TextEdit.getCurrentCategory();

}


function initShare(oForm, element_name) {

frmElement = oForm.elements[element_name];
frmElement.value = window.parent.TextEdit.getCurrentShare();




}


function initAssign(oForm, element_name) {

frmElement = oForm.elements[element_name];

frmElement.value = window.parent.TextEdit.getCurrentAssign();

}


function initDesc(oForm, element_name) {

frmElement = oForm.elements[element_name];

frmElement.value = window.parent.TextEdit.getCurrentDesc();



}



function initLink(oForm, element_name) {

frmElement = oForm.elements[element_name];

frmElement.value = window.parent.TextEdit.getCurrentLink();



}



function append()
      {

                var add = document.getElementById("lilink");
                var cb = document.createElement( "input" );
                var children = add.childNodes.length;
            //    alert(children);
              //  if(children == 3) add.appendChild(br);
                cb.type = "text";
                //cb.id = value;
                //cb.value = value;
               // cb.name = "checkgroup";
                //var text = document.createTextNode( value);
                var br = document.createElement("br");
                
                //add.appendChild(text);
                add.appendChild(br);
                add.appendChild(cb);

                 }


function getLinks()
{
    try
    {
    var links = window.parent.TextEdit.getCurrentLinks();
    var arraylinks = links.split(",");
    var add = document.getElementById("lilink");
  
   for(var i=0;i<arraylinks.length;i++)
   {
                if(arraylinks[i] != "" )
                {
                    var link = document.createElement("input");
                    link.setAttribute('value',arraylinks[i]);
                 //   var a = document.createElement("a");
                  //  a.setAttribute('target', '_blank');
                  //  a.setAttribute('href',arraylinks[i]);
                  //  var num = i+1;
                   // var text = document.createTextNode("Link"+num);
                    var br = document.createElement("br");
                    
                    //a.appendChild(text);
                   // link.appendChild(a);
                   // link.appendChild(text);
                    add.appendChild(br);
                    add.appendChild(link);
                }
                
                

   }}catch(e){alert(e.message);}
}

 function mergelinks()
 {
     var add = document.getElementById("lilink");
     var children = add.childNodes.length;
     var linkString = '';
     for(var i=0;i<children;i++)
     {
         if(add.childNodes[i].type == "text")
         {
             var value = add.childNodes[i].value;
             if(value != "") 
             {



                 linkString += value + ',';
                 };
             }
         }
         var length = linkString.length;
         var links = linkString.substr(0, length - 1);
     //    alert(linkString.substr(0, length - 1));
         parent.TextEdit.setLinks(links);
         
     }
  function appendCalendar()
  {
      var date = document.myform.theDate.value;
      var user = window.parent.TextEdit.getUser();
      var pwd = window.parent.TextEdit.getPwd();
      var name = document.myform.nome.value;
      
      if(date != null && date !="" && date!="Choose a Date(Optional)")
      {
         
          saveCalendar(user,pwd,date,name);
          
          
      }
      else
      {
          
          alert("You must choose a date");
          alert(pwd);
         
      }
      
  }


  function saveCalendar(user,pwd,duedate,name)
  {
      try{
          

                    var url1 = "./CalendarServlet";
                    



                    objXml = new XMLHttpRequest();

                    objXml.open("POST",url1,false);

                    objXml.setRequestHeader('Content-Type', "text/plain;charset=UTF-8");


                    objXml.setRequestHeader('user',user);
                    objXml.setRequestHeader('pwd',pwd);
                    objXml.setRequestHeader('name',name);
                    objXml.setRequestHeader('duedate',duedate);
                    

                    objXml.send(null);
                    str = objXml.responseText;
                    confirm("RISP from server: " +str);
                }catch(e){alert(e.message);
  }}









</script>
</head>

<body id="public" onload="getLinks();initStatus(document.forms[0], 'status');initForm(document.forms[0], 'nome');initDate(document.forms[0], 'theDate');initCat(document.forms[0], 'category');initShare(document.forms[0], 'share');initAssign(document.forms[0],'assign');initDesc(document.forms[0],'elm1');go();"  style="background-color: #add8e6">
<div id="container">



<form name='myform'>


	<h2>Task Properties</h2>



<ul>



<li id="foli106" 		class="     ">
	<label class="desc" id="title106" for="Field106">
		Name
			</label>
	<div>
		<input id ="nome" name="nome" type="text" onclick="document.myform.nome.value=''"/>
			</div>
	</li>


<li id="foli107"
		class="     ">


	<label class="desc" id="title107" for="Field107">
		Description of task
			</label>

	<div>
				<textarea id="elm1" name="elm1" rows="15" style="width: 90%">
	</textarea>

			</div>



	</li>

<li id="foli106" 		class="     ">
	<label class="desc" id="title106" for="Field106">
		Assign Task to users
			</label>
	<div>
		<input id ="assign" name="assign" type="text" onclick="childWindow=open('/assign.html','_blank','status=1,toolbar=1,scrollbars=1,width=900,height=1200')"/>
			</div>
	</li>
<li id="foli1" 		class="leftHalf      ">
	<label class="desc" id="title1" for="Field1">
		Status
			</label>
	<div>
		<select name="status" id="status" >

                    <option value="Enabled">Enabled</option>
                    <option value="Not Enabled">Not Enabled</option>
                    
                    <option value="Done">Done</option>
                    


	    </select>
	</div>
	</li>
 <li >
            <label class="desc" id="title2" for="Field2">
		Diagram Shared with
			</label>
        <input type="text"  id="share" name="share"  onclick="childWindow=open('/newhtml.html','_blank','status=1,toolbar=1,scrollbars=1,width=600,height=800')" disabled="disabled"/>

    </li>

<li id="foli108" 		class="      ">
	<label class="desc" id="title108" for="Field108">
		Category
			</label>
	<div>
		<select id="category" 			name="category" 			class="field select medium" 						tabindex="4" >
                    <option > </option>
						<option value="Personal" 				>
				Personal
			</option>
						<option value="Home" 				>
				Home
			</option>
						<option value="Business" 				>
				Business
			</option>
					</select>
	</div>
	</li>


<li id="lidate" 		class="date      " name="lidate">
	<label class="desc" id="title2" for="Field2">
		Due Date
			</label>
	<input type="text"  id="theDate" name="theDate" onclick="displayCalendar(document.forms[0].theDate,'yyyy-mm-dd',this)"/>
        <a href="#" onclick="appendCalendar();" >Add a reminder on Google Calendar </a>
	</li>



    <li  		class="     ">
	<label class="desc" id="links" for="Field106">
		Links
			</label>
        <a href="#" onclick="append();" >Add Link </a>
	<div id="lilink">
		<input id ="link" name="link" type="text"/>
                
	</div>
	</li>







	<li class="buttons ">
		<div>

	<input type="button" name="ok" value="Ok"      onclick="mergelinks(),window.parent.TextEdit.setContent(document.myform.nome.value,document.myform.status.value,document.myform.theDate.value,document.myform.category.value,document.myform.share.value,document.myform.assign.value,tinyMCE.activeEditor.getContent())"/>
	<input type="button" name="reset" value="Cancella" onclick="window.parent.TextEdit.cancel()"/>

				</div>
	</li>


</ul>
</form>

</div><!--container-->

</body>
</html>